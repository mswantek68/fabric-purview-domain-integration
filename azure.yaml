name: ai-fabric-foundry
infra:
  provider: bicep
hooks:
  postprovision:
    - run: ./scripts/ensure_active_capacity.ps1
      interactive: false
      shell: pwsh
    - run: ./scripts/create_fabric_domain.ps1
      interactive: false
      shell: pwsh
    - run: ./scripts/create_fabric_workspace.ps1
      interactive: false
      shell: pwsh
    - run: ./scripts/assign_workspace_to_domain.ps1
      interactive: false
      shell: pwsh
    - run: ./scripts/create_purview_collection.ps1
      interactive: false
      shell: pwsh
    - run: ./scripts/register_fabric_datasource.ps1
      interactive: false
      shell: pwsh
    - run: ./scripts/connect_log_analytics.ps1
      interactive: false
      shell: pwsh
    - run: ./scripts/create_lakehouses.ps1
      interactive: false
      shell: pwsh
    - run: ./scripts/materialize_document_folders.ps1
      interactive: false
      shell: pwsh
    - run: ./scripts/grant_fabric_access.ps1
      interactive: false
      shell: pwsh
    - run: ./scripts/trigger_purview_scan_for_fabric_workspace.ps1
      interactive: false
      shell: pwsh
    - run: ./scripts/setup_ai_search_auto.ps1
      interactive: false
      shell: pwsh
metadata:
  template: ''